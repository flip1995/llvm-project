; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %riscv64_cheri_purecap_llc -mattr=+d -verify-machineinstrs -O0 < %s | FileCheck %s
; RUN: %riscv32_cheri_purecap_llc -mattr=+d -verify-machineinstrs -O0 < %s | FileCheck %s

%struct.wobble = type { [64 x i8] }

define i8 addrspace(200)* @pluto() addrspace(200) nounwind {
; CHECK-LABEL: pluto:
; CHECK:       # %bb.0: # %bb
; CHECK-NEXT:    cincoffset csp, csp, -192
; CHECK-NEXT:    csc cra, [[#CRA_OFFSET:]](csp)
; CHECK-NEXT:    csc cs0, [[#CS0_OFFSET:]](csp)
; CHECK-NEXT:    cincoffset cs0, csp, 192
; CHECK-NEXT:    cgetaddr a0, csp
; CHECK-NEXT:    andi a0, a0, -64
; CHECK-NEXT:    csetaddr csp, csp, a0
; CHECK-NEXT:    addi a0, zero, 64
; CHECK-NEXT:    cincoffset ca1, csp, 64
; CHECK-NEXT:    csetbounds ca0, ca1, a0
; CHECK-NEXT:    cincoffset csp, cs0, -192
; CHECK-NEXT:    clc cs0, [[#CS0_OFFSET]](csp)
; CHECK-NEXT:    clc cra, [[#CRA_OFFSET]](csp)
; CHECK-NEXT:    cincoffset csp, csp, 192
; CHECK-NEXT:    cret
bb:
  %tmp = alloca %struct.wobble, align 64, addrspace(200)
  %ret = bitcast %struct.wobble addrspace(200)* %tmp to i8 addrspace(200)*
  ret i8 addrspace(200)* %ret
}
